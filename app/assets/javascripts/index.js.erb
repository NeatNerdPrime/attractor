<% if @serve_static %>
const data = <%= JSON.generate(@values) %>;
<% else %>
(async () => {
  const data = await (await fetch("/values")).json();
<% end %>

  const svg = chart(data);

<% if @serve_static %>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelector('#graph').appendChild(svg.node());
});
<% else %>
  document.querySelector('#graph').appendChild(svg.node());
})();
<% end %>
